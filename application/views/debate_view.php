


<div class="contents">
    <div class="con-group">
        <div class="con-heading ">
            <div class="con-heading-inner con-about loc-center">
                <h2 class="h2 ">
                    <div class="sub-title">카테고리 종류, 카테고리 명</div>
                    <div class="title">우주에는 다른 생명체가 있을까?</div>
                </h2>
                <div class="debate-info-group">
                    <ul>
                        <li>
                            <!-- 클리시 on클래스 추가 -->
                            <button type="button" class="btn-like2" title="좋아요"></button>
                        </li>
                        <li>
                            <!-- 클리시 on클래스 추가 -->
                            <button type="button" class="btn-bookmark2" title="책갈피 저장"></button>
                        </li>
                        <li>
                            <button type="button" class="btn-people" title=""></button>
                        </li>
                        <li>
                            <button type="button" class="btn-sns2" title="sns"></button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="con-body pdl60-pdr60 pdb43 loc-center radius20">
            <div class="voice-group">
                <div class="voice-side">
                    <div class="header-group">
                        <h4 class="h5-small font-bold darkgray ico-voice">음성 토론에 참여해 보세요.</h4>
                        <button type="button" class="btn-debate-listen">
                            <span>토론 전체듣기</span>
                        </button>
                    </div>
                    <div class="voicechat-box">
                        <ul class="voicechat-lists ui-scroll">
                            <li class="anyone">
                                <div class="voicechat-group anyone">
                                    <div class="name">홍길동</div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                </div>
                            </li>
                            <li class="anyone">
                                <div class="voicechat-group anyone">
                                    <div class="name">꿈돌이길동이</div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                            <li class="anyone">
                                <div class="voicechat-group anyone">
                                    <div class="name">바마라다나가</div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                </div>
                            </li>
                            <li class="anyone">
                                <div class="voicechat-group anyone">
                                    <div class="name">가나다라마바</div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                </div>
                            </li>
                            <li class="anyone">
                                <div class="voicechat-group anyone">
                                    <div class="name">뽕뿡이</div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                            <li class="me">
                                <div class="voicechat-group me">
                                    <div class="time">
                                        <span>16:30</span>
                                    </div>
                                    <button type="button" class="btn-play"><span>02:30</span></button>
                                    <div class="name">과학이 좋아요</div>
                                </div>
                            </li>
                        </ul>

                        <div class="voicechat-act-box">
                            <div class="voicechat-act-group">
                                <div id="formats">Format: start recording to see sample rate</div>
                                <ol id="recordingsList"></ol>
                                <div class="btn-group start-group"> <!-- .none 클래스 추가시 안보임 -->
                                    <button type="button" id="recordButton" class="btn-start" title="녹음시작"></button>
                                    <div class="txt">클릭하여 녹음을 시작하세요</div>
                                </div>
                                <div id="stop_div" class="btn-group stop-group none"> <!-- .none 클래스 삭제시 보임 -->
                                    <button type="button" id="stopButton" class="btn-stop "  title="녹음중지"></button>
                                    <div class="txt">녹음중&middot;&middot;&middot;</div>
                                </div>

                                <div class="btn-group stop-group none"> <!-- .none 클래스 삭제시 보임 -->
                                    <button type="button" id="pauseButton" class="btn-stop " title="녹음정지"></button>
                                    <div class="txt">녹음정지&middot;&middot;&middot;</div>
                                </div>

                                <div class="btn-group complete-group none"> <!-- .none 클래스 삭제시 보임 -->
                                    <button type="button" class="btn-complete" title="녹음완료"></button>
                                    <button type="button" class="btn-record-cancel" title="녹음취소"></button>
                                    <div class="txt">녹음완료</div>
                                </div>
                            </div>
                            <div class="btn-group send-group">
                                <button type="button" class="btn-voice-send" title="전송"></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="voice-side">
                    <div class="header-group flex content-center align-item-end">
                        <h6 class="h6-small text-center darkgray">관련 콘텐츠</h6>
                    </div>
                    <ul class="related-lists">
                        <li>
                            <button type="button" class="btn-related">
                                <div class="related-heading">
                                    <img src="/public/images/thumb_related0.png" alt="콘텐츠 제목">
                                </div>
                                <div class="related-body">
                                    <div class="category">카테고리</div>
                                    <div class="title">콘텐츠 제목</div>
                                </div>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="btn-related">
                                <div class="related-heading">
                                    <img src="/public/images/thumb_related0.png" alt="콘텐츠 제목">
                                </div>
                                <div class="related-body">
                                    <div class="category">카테고리</div>
                                    <div class="title">콘텐츠 제목</div>
                                </div>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="btn-related">
                                <div class="related-heading">
                                    <img src="/public/images/thumb_related0.png" alt="콘텐츠 제목">
                                </div>
                                <div class="related-body">
                                    <div class="category">카테고리</div>
                                    <div class="title">콘텐츠 제목</div>
                                </div>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- QUICK -->
            <div class="quick-group">
                <button type="button" class="btn-debate-out"><span>토론방<br>나가기</span></button>
                <button type="button" class="btn-quick do-refresh" title="리플래시"></button>
                <a href="#header" class="btn-quick do-top" title="탑으로 이동"></a>
            </div>
            <!-- // QUICK -->
        </div>
    </div>
</div>


<script type="text/javascript" src="/public/js/recorder.js"></script>
<script type="text/javascript" src="/public/js/app.js"></script>



<script>

    var conn = new WebSocket('<?=$ws_server?>');
    conn.onerror = function (error) {

        alert("서버에 문제가 발생되었습니다.\n잠시 후 이용바랍니다.");
        // location.href = '/';
        return;
    };

    var client = {
        user_id: <?php echo $user_idx; ?>,
        room_id: <?php echo $room_idx; ?>,
        recipient_id: null,
        message: null
    };

    conn.onopen = function(e) {

        conn.send(JSON.stringify(client));
        $('#messages').append('<font color="green">Successfully connected as user '+ client.user_id +'</font><br>');
    };

    conn.onmessage = function(e) {

        var data = JSON.parse(e.data);

        if (data.message) {
            alert(data.message)
            $('#messages').append(data.user_id + ' : ' + data.message + '<br>');
        }
    };

    $('#submit').click(function() {
        client.message = $('#text').val();
        if ($('#recipient_id').val()) {

            /* 멀티
            var user = $('#recipient_id').val().split(',');
            for ( var i in user ) {

                client.recipient_id = user[i];
                conn.send(JSON.stringify(client));
            }
            */

            client.recipient_id = $('#recipient_id').val();
        }
        conn.send(JSON.stringify(client));
    });
</script>
